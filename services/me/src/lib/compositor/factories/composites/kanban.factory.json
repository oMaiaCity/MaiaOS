{
  "$schema": "composite-factory",
  "parameters": {
    "itemsPath": { "type": "string", "required": true },
    "itemKey": { "type": "string", "default": "id" }
  },
  "factory": {
    "container": {
      "class": "flex gap-2 @xs:gap-3 @sm:gap-4 overflow-x-auto overflow-y-hidden min-h-0 flex-1 scroll-smooth w-full"
    },
    "children": [
      {
        "slot": "kanban-column-todo",
        "composite": {
          "container": {
            "class": "flex flex-col gap-2 h-full min-h-0 border border-slate-200 rounded-lg @sm:rounded-xl @md:rounded-2xl p-2 @xs:p-2.5 @sm:p-3 @md:p-4 min-w-[240px] @xs:min-w-[260px] @sm:min-w-[280px] flex-shrink-0 bg-slate-50 overflow-hidden"
          },
          "children": [
            { "slot": "header", "leaf": { "tag": "h3", "classes": "text-xs @xs:text-sm @sm:text-base font-semibold text-slate-700 mb-2 flex-shrink-0 text-center", "elements": ["Todo"] } },
            {
              "slot": "dropzone",
              "composite": {
                "container": { "class": "flex flex-col gap-1.5 @xs:gap-2 @sm:gap-2.5 flex-1 overflow-y-auto rounded-lg transition-all duration-200 scroll-smooth border-2 border-transparent w-full", "attributes": { "data-status": "todo", "data-dropzone": "true" } },
                "bindings": { "visible": { "$or": [{ "$": "context.isDragging" }, true] } },
                "events": { "drop": { "event": "@context/drop", "payload": { "status": "todo" } }, "dragover": {}, "dragenter": { "event": "@context/update", "payload": { "dragOverColumn_todo": true } }, "dragleave": { "event": "@context/update", "payload": { "dragOverColumn_todo": false } } },
                "foreach": {
                  "items": "{{itemsPath}}", "key": "{{itemKey}}",
                  "composite": {
                    "container": { "class": "flex items-start gap-1.5 @xs:gap-2 @sm:gap-2 px-2 py-1.5 @xs:px-2.5 @xs:py-2 @sm:px-3 @sm:py-2 @md:px-3 @md:py-2.5 rounded-lg @sm:rounded-xl bg-white border border-slate-200 shadow-[0_0_4px_rgba(0,0,0,0.02)] hover:shadow-[0_0_8px_rgba(0,0,0,0.04)] transition-all cursor-move flex-shrink-0 overflow-hidden", "attributes": { "draggable": "true", "data-todo-id": "item.id" } },
                    "bindings": { "visible": { "$eq": [{ "$": "item.status" }, "todo"] } },
                    "events": { "dragstart": { "event": "@context/dragStart", "payload": { "id": "item.id", "status": "item.status" } }, "dragend": { "event": "@context/dragEnd", "payload": {} } },
                    "children": [
                      { "slot": "checkbox", "leaf": { "tag": "button", "attributes": { "type": "button" }, "classes": "w-4 h-4 @xs:w-5 @xs:h-5 @sm:w-5 @sm:h-5 rounded-full border-2 flex items-center justify-center transition-all duration-200 focus:outline-none focus:ring-1 @sm:focus:ring-2 focus:ring-[#001a42] focus:ring-offset-0.5 @sm:focus:ring-offset-1 cursor-pointer shrink-0 mt-0.5", "bindings": { "class": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "done"] }, "then": "border-green-500 bg-green-100", "else": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "in-progress"] }, "then": "border-blue-500 bg-blue-100", "else": "border-slate-300 bg-slate-100" } } } } }, "events": { "click": { "event": "@core/toggleStatus", "payload": { "id": "item.id", "value1": "todo", "value2": "done", "statusField": "status" } } }, "elements": [{ "tag": "span", "classes": "text-green-500 font-bold text-xs @xs:text-xs @sm:text-sm", "bindings": { "text": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "done"] }, "then": "✓", "else": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "in-progress"] }, "then": "⋯", "else": "" } } } }, "visible": { "$or": [{ "$eq": [{ "$": "item.status" }, "done"] }, { "$eq": [{ "$": "item.status" }, "in-progress"] }] } } }] } },
                      { "slot": "name", "leaf": { "tag": "input", "attributes": { "type": "text" }, "classes": "flex-1 text-xs @xs:text-sm @sm:text-sm font-medium text-slate-700 bg-transparent border-none outline-none focus:outline-none focus:ring-0 px-0 min-w-0", "bindings": { "value": { "$": "item.name" }, "class": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "done"] }, "then": "line-through text-slate-400", "else": "" } } }, "events": { "blur": { "event": "@core/updateEntity", "payload": { "id": "item.id", "name": "item.name" } } } } },
                      { "slot": "delete", "leaf": { "tag": "button", "classes": "px-1 py-0.5 @xs:px-1 @xs:py-0.5 @sm:px-1.5 @sm:py-1 text-xs text-slate-400 hover:text-slate-700 hover:bg-slate-100 rounded-full transition-all w-4 h-4 @xs:w-5 @xs:h-5 @sm:w-5 @sm:h-5 flex items-center justify-center shrink-0 mt-0.5", "attributes": { "type": "button" }, "elements": ["✕"], "events": { "click": { "event": "@core/deleteEntity", "payload": { "id": "item.id" } } } } }
                    ]
                  }
                }
              }
            }
          ]
        }
      },
      {
        "slot": "kanban-column-in-progress",
        "composite": {
          "container": {
            "class": "flex flex-col gap-2 h-full min-h-0 border border-slate-200 rounded-lg @sm:rounded-xl @md:rounded-2xl p-2 @xs:p-2.5 @sm:p-3 @md:p-4 min-w-[240px] @xs:min-w-[260px] @sm:min-w-[280px] flex-shrink-0 bg-slate-50 overflow-hidden"
          },
          "children": [
            { "slot": "header", "leaf": { "tag": "h3", "classes": "text-xs @xs:text-sm @sm:text-base font-semibold text-blue-700 mb-2 flex-shrink-0 text-center", "elements": ["In Progress"] } },
            {
              "slot": "dropzone",
              "composite": {
                "container": { "class": "flex flex-col gap-1.5 @xs:gap-2 @sm:gap-2.5 flex-1 overflow-y-auto rounded-lg transition-all duration-200 scroll-smooth border-2 border-transparent w-full", "attributes": { "data-status": "in-progress", "data-dropzone": "true" } },
                "bindings": { "visible": { "$or": [{ "$": "context.isDragging" }, true] } },
                "events": { "drop": { "event": "@context/drop", "payload": { "status": "in-progress" } }, "dragover": {}, "dragenter": { "event": "@context/update", "payload": { "dragOverColumn_in_progress": true } }, "dragleave": { "event": "@context/update", "payload": { "dragOverColumn_in_progress": false } } },
                "foreach": {
                  "items": "{{itemsPath}}", "key": "{{itemKey}}",
                  "composite": {
                    "container": { "class": "flex items-start gap-1.5 @xs:gap-2 @sm:gap-2 px-2 py-1.5 @xs:px-2.5 @xs:py-2 @sm:px-3 @sm:py-2 @md:px-3 @md:py-2.5 rounded-lg @sm:rounded-xl bg-white border border-slate-200 shadow-[0_0_4px_rgba(0,0,0,0.02)] hover:shadow-[0_0_8px_rgba(0,0,0,0.04)] transition-all cursor-move flex-shrink-0 overflow-hidden", "attributes": { "draggable": "true", "data-todo-id": "item.id" } },
                    "bindings": { "visible": { "$eq": [{ "$": "item.status" }, "in-progress"] } },
                    "events": { "dragstart": { "event": "@context/dragStart", "payload": { "id": "item.id", "status": "item.status" } }, "dragend": { "event": "@context/dragEnd", "payload": {} } },
                    "children": [
                      { "slot": "checkbox", "leaf": { "tag": "button", "attributes": { "type": "button" }, "classes": "w-4 h-4 @xs:w-5 @xs:h-5 @sm:w-5 @sm:h-5 rounded-full border-2 flex items-center justify-center transition-all duration-200 focus:outline-none focus:ring-1 @sm:focus:ring-2 focus:ring-[#001a42] focus:ring-offset-0.5 @sm:focus:ring-offset-1 cursor-pointer shrink-0 mt-0.5", "bindings": { "class": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "done"] }, "then": "border-green-500 bg-green-100", "else": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "in-progress"] }, "then": "border-blue-500 bg-blue-100", "else": "border-slate-300 bg-slate-100" } } } } }, "events": { "click": { "event": "@core/toggleStatus", "payload": { "id": "item.id", "value1": "todo", "value2": "done", "statusField": "status" } } }, "elements": [{ "tag": "span", "classes": "text-green-500 font-bold text-xs @xs:text-xs @sm:text-sm", "bindings": { "text": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "done"] }, "then": "✓", "else": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "in-progress"] }, "then": "⋯", "else": "" } } } }, "visible": { "$or": [{ "$eq": [{ "$": "item.status" }, "done"] }, { "$eq": [{ "$": "item.status" }, "in-progress"] }] } } }] } },
                      { "slot": "name", "leaf": { "tag": "input", "attributes": { "type": "text" }, "classes": "flex-1 text-xs @xs:text-sm @sm:text-sm font-medium text-slate-700 bg-transparent border-none outline-none focus:outline-none focus:ring-0 px-0 min-w-0", "bindings": { "value": { "$": "item.name" }, "class": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "done"] }, "then": "line-through text-slate-400", "else": "" } } }, "events": { "blur": { "event": "@core/updateEntity", "payload": { "id": "item.id", "name": "item.name" } } } } },
                      { "slot": "delete", "leaf": { "tag": "button", "classes": "px-1 py-0.5 @xs:px-1 @xs:py-0.5 @sm:px-1.5 @sm:py-1 text-xs text-slate-400 hover:text-slate-700 hover:bg-slate-100 rounded-full transition-all w-4 h-4 @xs:w-5 @xs:h-5 @sm:w-5 @sm:h-5 flex items-center justify-center shrink-0 mt-0.5", "attributes": { "type": "button" }, "elements": ["✕"], "events": { "click": { "event": "@core/deleteEntity", "payload": { "id": "item.id" } } } } }
                    ]
                  }
                }
              }
            }
          ]
        }
      },
      {
        "slot": "kanban-column-done",
        "composite": {
          "container": {
            "class": "flex flex-col gap-2 h-full min-h-0 border border-slate-200 rounded-lg @sm:rounded-xl @md:rounded-2xl p-2 @xs:p-2.5 @sm:p-3 @md:p-4 min-w-[240px] @xs:min-w-[260px] @sm:min-w-[280px] flex-shrink-0 bg-slate-50 overflow-hidden"
          },
          "children": [
            { "slot": "header", "leaf": { "tag": "h3", "classes": "text-xs @xs:text-sm @sm:text-base font-semibold text-green-700 mb-2 flex-shrink-0 text-center", "elements": ["Done"] } },
            {
              "slot": "dropzone",
              "composite": {
                "container": { "class": "flex flex-col gap-1.5 @xs:gap-2 @sm:gap-2.5 flex-1 overflow-y-auto rounded-lg transition-all duration-200 scroll-smooth border-2 border-transparent w-full", "attributes": { "data-status": "done", "data-dropzone": "true" } },
                "bindings": { "visible": { "$or": [{ "$": "context.isDragging" }, true] } },
                "events": { "drop": { "event": "@context/drop", "payload": { "status": "done" } }, "dragover": {}, "dragenter": { "event": "@context/update", "payload": { "dragOverColumn_done": true } }, "dragleave": { "event": "@context/update", "payload": { "dragOverColumn_done": false } } },
                "foreach": {
                  "items": "{{itemsPath}}", "key": "{{itemKey}}",
                  "composite": {
                    "container": { "class": "flex items-start gap-1.5 @xs:gap-2 @sm:gap-2 px-2 py-1.5 @xs:px-2.5 @xs:py-2 @sm:px-3 @sm:py-2 @md:px-3 @md:py-2.5 rounded-lg @sm:rounded-xl bg-white border border-slate-200 shadow-[0_0_4px_rgba(0,0,0,0.02)] hover:shadow-[0_0_8px_rgba(0,0,0,0.04)] transition-all cursor-move flex-shrink-0 overflow-hidden", "attributes": { "draggable": "true", "data-todo-id": "item.id" } },
                    "bindings": { "visible": { "$eq": [{ "$": "item.status" }, "done"] } },
                    "events": { "dragstart": { "event": "@context/dragStart", "payload": { "id": "item.id", "status": "item.status" } }, "dragend": { "event": "@context/dragEnd", "payload": {} } },
                    "children": [
                      { "slot": "checkbox", "leaf": { "tag": "button", "attributes": { "type": "button" }, "classes": "w-4 h-4 @xs:w-5 @xs:h-5 @sm:w-5 @sm:h-5 rounded-full border-2 flex items-center justify-center transition-all duration-200 focus:outline-none focus:ring-1 @sm:focus:ring-2 focus:ring-[#001a42] focus:ring-offset-0.5 @sm:focus:ring-offset-1 cursor-pointer shrink-0 mt-0.5", "bindings": { "class": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "done"] }, "then": "border-green-500 bg-green-100", "else": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "in-progress"] }, "then": "border-blue-500 bg-blue-100", "else": "border-slate-300 bg-slate-100" } } } } }, "events": { "click": { "event": "@core/toggleStatus", "payload": { "id": "item.id", "value1": "todo", "value2": "done", "statusField": "status" } } }, "elements": [{ "tag": "span", "classes": "text-green-500 font-bold text-xs @xs:text-xs @sm:text-sm", "bindings": { "text": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "done"] }, "then": "✓", "else": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "in-progress"] }, "then": "⋯", "else": "" } } } }, "visible": { "$or": [{ "$eq": [{ "$": "item.status" }, "done"] }, { "$eq": [{ "$": "item.status" }, "in-progress"] }] } } }] } },
                      { "slot": "name", "leaf": { "tag": "input", "attributes": { "type": "text" }, "classes": "flex-1 text-xs @xs:text-sm @sm:text-sm font-medium text-slate-700 bg-transparent border-none outline-none focus:outline-none focus:ring-0 px-0 min-w-0", "bindings": { "value": { "$": "item.name" }, "class": { "$if": { "test": { "$eq": [{ "$": "item.status" }, "done"] }, "then": "line-through text-slate-400", "else": "" } } }, "events": { "blur": { "event": "@core/updateEntity", "payload": { "id": "item.id", "name": "item.name" } } } } },
                      { "slot": "delete", "leaf": { "tag": "button", "classes": "px-1 py-0.5 @xs:px-1 @xs:py-0.5 @sm:px-1.5 @sm:py-1 text-xs text-slate-400 hover:text-slate-700 hover:bg-slate-100 rounded-full transition-all w-4 h-4 @xs:w-5 @xs:h-5 @sm:w-5 @sm:h-5 flex items-center justify-center shrink-0 mt-0.5", "attributes": { "type": "button" }, "elements": ["✕"], "events": { "click": { "event": "@core/deleteEntity", "payload": { "id": "item.id" } } } } }
                    ]
                  }
                }
              }
            }
          ]
        }
      }
    ]
  }
}
