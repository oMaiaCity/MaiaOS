{
  "$schema": "leaf-factory",
  "parameters": {
    "textPath": { "type": "string", "required": true },
    "variant": { "type": "string", "default": "default" },
    "colorExpression": { "type": "any", "default": null }
  },
  "maps": {
    "variantClasses": {
      "done": "bg-green-100 text-green-700",
      "in-progress": "bg-blue-100 text-blue-700",
      "todo": "bg-slate-100 text-slate-700",
      "default": "bg-gray-100 text-gray-700"
    }
  },
  "factory": {
    "$factoryIf": {
      "test": { "$ne": [{ "$": "colorExpression" }, null] },
      "then": {
        "tag": "span",
        "classes": "px-1 py-0 @xs:px-1.5 @xs:py-0.5 text-[8px] @xs:text-[10px] @sm:text-xs font-medium rounded-full border border-white shrink-0",
        "bindings": {
          "text": "{{textPath}}",
          "class": "{{colorExpression}}"
        }
      },
      "else": {
        "$factorySwitch": {
          "param": "variant",
          "cases": {
            "done": {
              "tag": "span",
              "classes": "px-1 py-0 @xs:px-1.5 @xs:py-0.5 text-[8px] @xs:text-[10px] @sm:text-xs font-medium rounded-full border border-white shrink-0 bg-green-100 text-green-700",
              "bindings": {
                "text": "{{textPath}}"
              }
            },
            "in-progress": {
              "tag": "span",
              "classes": "px-1 py-0 @xs:px-1.5 @xs:py-0.5 text-[8px] @xs:text-[10px] @sm:text-xs font-medium rounded-full border border-white shrink-0 bg-blue-100 text-blue-700",
              "bindings": {
                "text": "{{textPath}}"
              }
            },
            "todo": {
              "tag": "span",
              "classes": "px-1 py-0 @xs:px-1.5 @xs:py-0.5 text-[8px] @xs:text-[10px] @sm:text-xs font-medium rounded-full border border-white shrink-0 bg-slate-100 text-slate-700",
              "bindings": {
                "text": "{{textPath}}"
              }
            }
          },
          "default": {
            "tag": "span",
            "classes": "px-1 py-0 @xs:px-1.5 @xs:py-0.5 text-[8px] @xs:text-[10px] @sm:text-xs font-medium rounded-full border border-white shrink-0 bg-gray-100 text-gray-700",
            "bindings": {
              "text": "{{textPath}}"
            }
          }
        }
      }
    }
  }
}
