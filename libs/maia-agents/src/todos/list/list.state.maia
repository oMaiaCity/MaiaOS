{
	"$schema": "째Maia/schema/state",
	"$id": "째Maia/todos/state/list",
	"initial": "idle",
	"states": {
		"idle": {
			"on": {
				"TOGGLE_BUTTON": {
					"target": "toggling"
				},
				"DELETE_BUTTON": {
					"target": "deleting"
				},
				"SUCCESS": {
					"target": "idle"
				}
			}
		},
		"toggling": {
			"entry": {
				"sendToActor": "째Maia/actor/db",
				"payload": {
					"op": "update",
					"id": "$$id",
					"data": {
						"done": {
							"$not": "$$done"
						}
					}
				}
			},
			"on": {
				"TOGGLE_BUTTON": {
					"target": "toggling"
				},
				"DELETE_BUTTON": {
					"target": "deleting"
				},
				"SUCCESS": {
					"target": "idle"
				},
				"ERROR": "error"
			}
		},
		"deleting": {
			"entry": {
				"sendToActor": "째Maia/actor/db",
				"payload": {
					"op": "delete",
					"id": "$$id"
				}
			},
			"on": {
				"DELETE_BUTTON": {
					"target": "deleting"
				},
				"TOGGLE_BUTTON": {
					"target": "toggling"
				},
				"SUCCESS": {
					"target": "idle"
				},
				"ERROR": "error"
			}
		},
		"error": {
			"entry": {
				"updateContext": {
					"error": "$$errors.0.message"
				}
			},
			"on": {
				"RETRY": {
					"target": "idle",
					"actions": [
						{
							"updateContext": {
								"error": null
							}
						}
					]
				},
				"DISMISS": {
					"target": "idle",
					"actions": [
						{
							"updateContext": {
								"error": null
							}
						}
					]
				}
			}
		}
	}
}
