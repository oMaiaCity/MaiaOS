{
  "$schema": "@schema/view",
  "$id": "@sparks/view/agent",
  "content": {
    "tag": "div",
    "class": "stack",
    "children": [
      {
        "tag": "div",
        "class": "header-section",
        "children": [
          {
            "tag": "h2",
            "class": "sparks-title",
            "text": "My Sparks"
          }
        ]
      },
      {
        "class": "form",
        "children": [
          {
            "tag": "input",
            "class": "input",
            "attrs": {
              "type": "text",
              "placeholder": "$inputPlaceholder"
            },
            "value": "$newSparkName",
            "$on": {
              "input": {
                "send": "UPDATE_INPUT",
                "payload": { "value": "@inputValue" }
              },
              "blur": {
                "send": "UPDATE_INPUT",
                "payload": { "value": "@inputValue" }
              },
              "keydown": {
                "send": "CREATE_BUTTON",
                "payload": { "value": "@inputValue" },
                "key": "Enter"
              }
            }
          },
          {
            "tag": "button",
            "class": "button",
            "text": "$createButtonText",
            "$on": {
              "click": {
                "send": "CREATE_BUTTON",
                "payload": { "value": "@inputValue" }
              }
            }
          }
        ]
      },
      {
        "tag": "div",
        "class": "error-message",
        "attrs": {
          "data": {
            "hasError": "$hasError"
          }
        },
        "children": [
          {
            "tag": "strong",
            "text": "Error: "
          },
          {
            "text": "$error"
          },
          {
            "tag": "button",
            "class": "button-dismiss",
            "text": "Dismiss",
            "$on": {
              "click": {
                "send": "DISMISS"
              }
            }
          }
        ]
      },
      {
        "tag": "div",
        "class": "sparks-list",
        "$each": {
          "items": "$sparks",
          "template": {
            "tag": "div",
            "class": "spark-item",
            "children": [
              {
                "tag": "h3",
                "class": "spark-name",
                "text": "$$name"
              }
            ]
          }
        }
      }
    ]
  }
}
