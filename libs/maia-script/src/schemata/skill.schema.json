{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://maiaos.dev/schemas/skill.schema.json",
  "title": "Skill Definition",
  "description": "AI agent interface specification",
  "type": "object",
  "required": ["$type", "actorType", "description", "stateEvents", "queryableContext"],
  "properties": {
    "$type": {
      "type": "string",
      "const": "skill"
    },
    "$id": {
      "type": "string",
      "description": "Unique skill identifier",
      "pattern": "^skill_"
    },
    "actorType": {
      "type": "string",
      "description": "Actor type this skill describes"
    },
    "version": {
      "type": "string",
      "description": "Skill version (e.g., '1.0.0')"
    },
    "description": {
      "type": "string",
      "description": "High-level capability summary"
    },
    "capabilities": {
      "type": "object",
      "description": "High-level capability categories",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string"
          },
          "when": {
            "type": "string",
            "description": "When to use this capability"
          }
        },
        "required": ["description"]
      }
    },
    "stateEvents": {
      "type": "object",
      "description": "Events the actor can handle",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string"
          },
          "payload": {
            "type": "object",
            "description": "Payload schema",
            "additionalProperties": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string"
                },
                "required": {
                  "type": "boolean"
                },
                "description": {
                  "type": "string"
                },
                "enum": {
                  "type": "array"
                },
                "maxLength": {
                  "type": "number"
                },
                "pattern": {
                  "type": "string"
                }
              },
              "additionalProperties": true
            }
          },
          "example": {
            "type": "object",
            "properties": {
              "event": {
                "type": "string"
              },
              "payload": {
                "type": "object",
                "additionalProperties": true
              }
            }
          },
          "when": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "User intent patterns"
          }
        },
        "required": ["description"]
      }
    },
    "queryableContext": {
      "type": "object",
      "description": "Context fields AI can read",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "schema": {
            "type": "object",
            "additionalProperties": true
          },
          "enum": {
            "type": "array"
          },
          "readOnly": {
            "type": "boolean"
          },
          "computed": {
            "type": "boolean"
          }
        },
        "additionalProperties": true
      }
    },
    "bestPractices": {
      "type": "array",
      "description": "Guidelines for AI agents",
      "items": {
        "type": "string"
      }
    },
    "commonPatterns": {
      "type": "object",
      "description": "Reusable interaction sequences",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string"
          },
          "userIntent": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "sequence": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "errorHandling": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            }
          }
        },
        "additionalProperties": true
      }
    },
    "examples": {
      "type": "array",
      "description": "Usage examples",
      "items": {
        "type": "object",
        "additionalProperties": true
      }
    }
  }
}
